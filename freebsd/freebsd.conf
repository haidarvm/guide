ssh-copy-id -i ~/.ssh/id_rsa.pub tim@just.some.other.server

ssh-copy-id -i ~/.ssh/id_rsa.pub haidar@example.com


wrk -t12 -c400 -d5s http://localhost
rewrk -c 400 -t 12 -d 5s -h http://localhost
wrk -t12 -c400 -d5s http://localhost/cpa.php

# set default to bash
chsh -s /usr/local/bin/bash
chsh -s /usr/local/bin/bash root

# create user
pw useradd -n haidar -c "Haidar" -s /bin/sh -m -G wheel
passwd haidar

# set default to sh
pw usermod root -s /bin/sh
pw usermod username -s /bin/sh

# doas alias
vim .bashrc
# add
alias doas='doas '
source .bashrc

# sshd no pass passwordless
doas vim /etc/ssh/sshd_config
PasswordAuthentication no
KbdInteractiveAuthentication no
UsePAM yes

# add user to wheel
pw groupmod wheel -m <username>

# doas / root set alias vi to vim

pw groupshow wheel

# doas set no password admin
cp /usr/local/etc/doas.conf.sample /usr/local/etc/doas.conf
vim /usr/local/etc/doas.conf
permit nopass haidar as root

# go to root
doas su


# auto complete #
vim  ~/.bashrc
complete -cf doas

# wrk bench
wrk -t12 -c400 -d5s http://localhost/info.html
wrk -t12 -c400 -d5s http://localhost:8000

# update
freebsd-update fetch install
pkg update && pkg upgrade
doas pkg upgrade -f

freebsd-update fetch
freebsd-update install

# check available version upgrade

# upgrade to 14.3
freebsd-update -r 14.3-RELEASE upgrade
freebsd-update install
pkg-static upgrade -f
freebsd-update install

# ports
pkg install portsnap
env BATCH=yes PM_NO_CONFIRM=yes portmaster -afy
env BATCH=yes ALWAYS_SCRUB_DISTFILES=yes portmaster -afy

# list installed ports
portmaster --list-origins


# enable service
sysrc nginx_enable="YES"
sysrc php_fpm_enable=YES
sudo sysrc mysql_enable=YES

# nginx stop start restart
service nginx onestart
service nginx onestop
service nginx onerestart

# uninstall port snap
make clean
make deinstall

# remove or reinstall config
doas make rmconfig

# pkg info version
pkg search package_name
pkg search openssh

# vi enable backspace / delete
stty erase ^?

# doas crontab -e
doas env EDITOR=vim crontab -e

# edittor default vim crontab
export EDITOR=/usr/local/bin/vim

# set default vim
echo 'export EDITOR=vim' >> ~/.profile
echo 'export VISUAL=vim' >> ~/.profile

# how to make www to user group
doas chmod g+s /path/to/directory
doas chmod -R g+rw /var/www/yourfolder


# check running port
sockstat -4 -l

# alias
alias h='fc -l'
alias j=jobs
alias to='nice top -j -P -a'
alias m="$PAGER"
alias g='egrep -i' 
alias c='clear'
alias sudo='doas'
alias dh='df -h'
alias ls='eza'
alias in='doas pkg install'
alias pse='doas pkg search'
alias pr='doas pkg remove'
alias px='ps aux | grep'
#alias up='doas freebsd-update fetch install && doas pkg update && doas pkg upgrade'
alias up='doas freebsd-update fetch install && doas pkg update -f && doas pkg upgrade -y && doas pkg autoremove -y && doas pkg clean -y'
alias v='vim'
alias vi='vim'
alias l='eza -lah --sort=modified'
alias la='ls -lah'
alias gr='grep -ri'
alias dv='doas vim'
alias dt='doas tail -100'
alias d='doas'
alias ds='doas service'
alias pil='doas pkg info | grep'
alias doc='doas chroot /compat/debian /bin/bash'
alias wk='wrk -t12 -c400 -d5s'
alias dua='du -hsx * | sort -rh | head -10'
alias jt='doas jexec jailname'
alias fb='doas fail2ban-client status'
alias bd='/home/haidar/.local/bin/brightness-down.sh'
alias bu='/home/haidar/.local/bin/brightness-up.sh'
alias cm='setxkbmap us -variant colemak'
alias dm='doas dmesg -a'
alias dms='doas dmesg -a | grep -i'
alias podman='doas podman'
alias wok='wrk -t12 -c400 -d5s'
alias gic='git clone'
alias ga='git add .'
alias gs='git status'
alias gcm='git commit -am'
alias gr='grep -ri'
alias tk='tmux kill-server'
alias pi='pip install'

# refresh .shrc
. .shrc

# repair date time


# link www to home
doas ln -s /usr/local/www /home/haidar/www

# partition
gpart show
ls /dev/da* /dev/ada*
doas pkg install fusefs-ntfs
doas mkdir -p /mnt/ntfsdisk
doas ntfs-3g /dev/da0p3 /mnt/seagate_data/
doas ntfs-3g /dev/da1p3 /mnt/seagate_data/
doas mount -t ntfs /dev/ada0p3 /mnt/ntfsdisk
doas umount /mnt/ntfsdisk
doas mount.exfat -o rw,uid=$(id -u),gid=$(id -g) /dev/da0s1 /mnt/haisan
doas mount.exfat /dev/da0s1 /mnt/haisan

# package search
pkg search nginx

# fusefs mount usb drive 
pkg install fusefs-ntfs

 /boot/loader.conf
fuse_load="YES"

# update to latest

# list package
pkg info | grep  postgres

# locate
pkg info --list-file chromium

# query 
pkg query

# add user to www
doas pw groupmod www -m username
id username
doas chmod g+w /path/to/file
doas chmod -R g+rw /path/to/directory

# check ssh login 
w 
who

# check ssh log
doas tail /var/log/auth.log

# add user to group
pw usermod haidar -G www
pw group mod wwww -m haidar

# check usb 
usbconfig

# openvpn
doas openvpn --config /usr/local/etc/openvpn/server.conf

#change from quarterly to latest
1.Create or Copy the Configuration File:
If the /usr/local/etc/pkg/repos/FreeBSD.conf file doesn't exist, create it. You can also copy the default configuration file from /etc/pkg/FreeBSD.conf to /usr/local/etc/pkg/repos/FreeBSD.conf. 

2. Edit the Configuration File:
Open the /usr/local/etc/pkg/repos/FreeBSD.cls /etc/ssh/ssh_host_*onf file using a text editor (e.g., nano, vi, vim). 

Locate the line containing the URL for the FreeBSD package repository. It will look something like this: url = http://pkg.freebsd.org/quarterly/. 
Change "quarterly" to "latest" in that line, so it becomes url = http://pkg.freebsd.org/latest/. 

# fail2ban
doas sysrc fail2ban_enable="YES"
doas service fail2ban start
doas vi /usr/local/etc/fail2ban/jail.local


[sshd]
enabled = true
port    = ssh
filter  = sshd
logpath = /var/log/auth.log
maxretry = 5
bantime  = 600
findtime = 600

doas fail2ban-client status sshd

# check hardware version
pciconf -lv
dmesg | grep ^CPU
sysctl -a hw.model
sysctl -a | grep -i hw.*cpu


# doas autocomplete in ~/.bashrc
complete -cf doas

# search with version
pkg info | grep qt5

# no detail
pkg query -a '%v%o' | grep qt5
pkg query -a '%v%o' | grep telegram


# sysctl
sysctl dev.cpu.0.freq_levels 
sysctl dev.cpu.0.freq
sysctl dev.cpu.0.freq=2561

# powersave
sysrc powerd_flags="-a hiadaptive -b adaptive -n adaptive"

# performance
doas sysrc powerd_flags="-a maximum -b maximum -n maximum"


#bench storage
doas fio --name=seq_write --filename=testfile.fio --rw=write --bs=1M --size=4G --direct=1 --ioengine=psync --group_reporting

# resize max storage
gpart show
doas gpart recover vtbd0
doas gpart resize -i 3 vtbd0
doas gpart resize -i 4 ada0

doas growfs /dev/vtbd0p3
doas growfs /

#set rc.conf 
#set to colemak
doas cp /usr/share/syscons/keymap/colemak.iso15.acc.kbd /usr/share/syscons/keymap/colemak.acc.kbd
keymap="colemak.acc.kbd"
